{"version":3,"sources":["../src/angular-flash.js"],"names":[],"mappings":"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","file":"angular-flash.js","sourcesContent":["/*! angular-flash - v2.0.0 - 2016-01-17\n * https://github.com/sachinchoolur/angular-flash\n * Copyright (c) 2016 Sachin; Licensed MIT */\n\nconst app = angular.module('flash', []);\n\napp.run([\n    '$rootScope', function($rootScope) {\n        return $rootScope.flashes = [];\n    }\n]);\n\napp.directive('dynamic', [\n    '$compile', function($compile) {\n        return {\n            restrict: 'A',\n            replace: true,\n            link: function(scope, ele, attrs) {\n                return scope.$watch(attrs.dynamic, function(html) {\n                    ele.html(html);\n                    return $compile(ele.contents())(scope);\n                });\n            }\n        };\n    }\n]);\n\napp.directive('closeFlash', [\n    '$compile', '$rootScope', 'Flash', function($compile, $rootScope, Flash) {\n        return {\n            link: function(scope, ele, attrs) {\n                return ele.on('click', function() {\n                    let id = parseInt(attrs.closeFlash, 10);\n                    Flash.dismiss(id);\n                    $rootScope.$apply();\n                });\n            }\n        };\n    }\n]);\n\napp.directive('flashMessage', [\n    'Flash', function(Flash) {\n        return {\n            restrict: 'E',\n            scope: {\n                duration: '=duration'\n            },\n            template: '<div ng-show=\"$root.flashes.length > 0\"><div role=\"alert\" ng-repeat=\"flash in $root.flashes track by $index\" class=\"alert {{flash.addClass}} alert-{{flash.type}} alert-dismissible alertIn alertOut \"> <span dynamic=\"flash.text\"></span> <button type=\"button\" class=\"close\" close-flash=\"{{flash.id}}\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button> </div></div>',\n            link: function(scope, ele, attrs) {\n                Flash.setDefaultTimeout(scope.duration);\n            }\n        };\n    }\n]);\n\napp.factory('Flash', [\n    '$rootScope', '$timeout', function($rootScope, $timeout) {\n        let dataFactory = {};\n        let counter = 0;\n        dataFactory.setDefaultTimeout = function(timeout) {\n            dataFactory.defaultTimeout = timeout;\n        };\n        dataFactory.getDefaultTimeout = function() {\n            return dataFactory.defaultTimeout;\n        };\n        dataFactory.create = function(type, text, timeout, addClass) {\n            let $this, flash;\n            $this = this;\n            flash = {\n                type: type,\n                text: text,\n                addClass: addClass,\n                id: counter++\n            };\n            if (dataFactory.defaultTimeout && typeof timeout === 'undefined') {\n                flash.timeout = dataFactory.defaultTimeout;\n            }\n            else if (timeout) {\n                flash.timeout = timeout;\n            }\n            $rootScope.flashes.push(flash);\n            if (flash.timeout) {\n                flash.timeoutObj = $timeout(function(id) {\n                    $this.dismiss(id);\n                }, flash.timeout, true, flash.id);\n            }\n        };\n        dataFactory.pause = function(index) {\n            if ($rootScope.flashes[index].timeoutObj) {\n                $timeout.cancel($rootScope.flashes[index].timeoutObj);\n            }\n        };\n        dataFactory.dismiss = function(id) {\n            const index = findIndexById(id);\n            if (index !== -1) {\n                dataFactory.pause(index);\n                $rootScope.flashes.splice(index, 1);\n                $rootScope.$digest();\n            }\n        };\n        dataFactory.clear = function() {\n            while ($rootScope.flashes.length > 0) {\n                dataFactory.dismiss(0);\n            }\n        };\n        dataFactory.reset = dataFactory.clear;\n        function findIndexById(id) {\n            return $rootScope.flashes.findIndex((flash) => {\n                return flash.id === id;\n            });\n        }\n        return dataFactory;\n    }\n]);\n"]}